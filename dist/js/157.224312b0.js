"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[157],{2356:function(t,e,i){i.d(e,{Z:function(){return c}});var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{"margin-bottom":"20px","font-size":"22px","font-weight":"bold"}},[t._v("评论 "+t._s(t.commentCount))]),e("div",{staticStyle:{"margin-bottom":"20px"}},[e("el-input",{attrs:{type:"textarea",placeholder:"请输入评论"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),e("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addComment(null)}}},[t._v("评论")])],1)],1),e("div",[t._l(t.commentList,(function(i){return e("div",{key:i.id,staticStyle:{"margin-bottom":"20px"}},[e("div",{staticStyle:{display:"flex","margin-bottom":"20px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:i.userAvatar,alt:""}}),e("div",{staticStyle:{"padding-left":"15px",flex:"1"}},[e("div",{staticStyle:{"margin-bottom":"10px",color:"#666"}},[t._v(t._s(i.userName))]),e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(i.content))]),e("div",{staticStyle:{color:"#666","font-size":"13px","margin-bottom":"5px"}},[e("span",[t._v(t._s(i.time))]),e("span",{class:{"comment-active":i.showReply},staticStyle:{margin:"0 20px",cursor:"pointer"},on:{click:function(e){return t.handleShowReply(i)}}},[e("i",{staticClass:"el-icon-s-comment"}),t._v("回复")]),i.userId===t.user.id?e("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.delComment(i.id)}}},[e("i",{staticClass:"el-icon-delete"}),t._v("删除")]):t._e()]),i.showReply?e("div",[e("el-input",{attrs:{type:"textarea",placeholder:"请输入回复"},model:{value:i.replyContent,callback:function(e){t.$set(i,"replyContent",e)},expression:"item.replyContent"}}),e("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addComment(i)}}},[t._v("回复")])],1)],1):t._e()])]),i.children?e("div",{staticStyle:{"padding-left":"65px"}},t._l(i.children,(function(a){return e("div",{key:a.id,staticStyle:{display:"flex","margin-bottom":"20px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:a.userAvatar,alt:""}}),e("div",{staticStyle:{"padding-left":"15px",flex:"1"}},[e("div",{staticStyle:{"margin-bottom":"10px",color:"#666"}},[t._v(t._s(a.userName)+" "),a.parentName!==i.userName?e("span",[t._v("回复："+t._s(a.parentName))]):t._e()]),e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(a.content))]),e("div",{staticStyle:{color:"#666","font-size":"13px","margin-bottom":"5px"}},[e("span",[t._v(t._s(a.time))]),e("span",{class:{"comment-active":a.showReply},staticStyle:{margin:"0 20px",cursor:"pointer"},on:{click:function(e){return t.handleShowReply(a)}}},[e("i",{staticClass:"el-icon-s-comment"}),t._v("回复")]),a.userId===t.user.id?e("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.delComment(a.id)}}},[e("i",{staticClass:"el-icon-delete"}),t._v("删除")]):t._e()]),a.showReply?e("div",[e("el-input",{attrs:{type:"textarea",placeholder:"请输入回复"},model:{value:a.replyContent,callback:function(e){t.$set(a,"replyContent",e)},expression:"sub.replyContent"}}),e("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addComment(a)}}},[t._v("回复")])],1)],1):t._e()])])})),0):t._e()])})),t.total>0?e("div",{staticStyle:{"margin-top":"10px"}},[e("el-pagination",{attrs:{small:"",background:"","current-page":t.pageNum,"page-sizes":[5,10,20],"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1):t._e()],2)])},n=[],s={name:"Comment",props:{fid:null,module:null},data(){return{user:JSON.parse(localStorage.getItem("xm-user")||"{}"),commentCount:0,content:"",commentList:[],pageNum:1,pageSize:5,total:0}},created(){this.loadComment()},methods:{handleShowReply(t){this.$set(t,"showReply",!t.showReply)},delComment(t){this.$confirm("您确定删除吗？","确认删除",{type:"warning"}).then((e=>{this.$request.delete("/comment/delete/"+t).then((t=>{"200"===t.code?(this.$message.success("删除成功"),this.loadComment()):this.$message.error(t.msg)}))})).catch((()=>{}))},loadComment(){this.$request.get("/comment/selectTree/"+this.fid+"/"+this.module,{params:{pageNum:this.pageNum,pageSize:this.pageSize}}).then((t=>{"200"==t.code?(this.commentList=t.data?.list||[],this.total=t.data?.total||0):this.$message.error(t.msg)})),this.$request.get("/comment/selectCount/"+this.fid+"/"+this.module).then((t=>{"200"==t.code?this.commentCount=t.data||0:this.$message.error(t.msg)}))},addComment(t){let e={fid:this.fid,userId:this.user.id,module:this.module,content:this.content};t&&(e.content=t.replyContent,e.pid=t.id),e.content?this.$request.post("/comment/add",e).then((t=>{"200"===t.code?(this.$message.success("操作成功"),this.content="",this.loadComment()):this.$message.error(t.msg)})):this.$message.warning("请输入内容!")},handleCurrentChange(t){this.pageNum=t,this.loadComment()}}},o=s,l=i(3736),r=(0,l.Z)(o,a,n,!1,null,"74c55f68",null),c=r.exports},5157:function(t,e,i){i.r(e),i.d(e,{default:function(){return m}});var a=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"50%",margin:"10px auto"}},[e("div",{staticStyle:{"margin-bottom":"10px"}},[e("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入标题",clearable:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.load(1)}}},[t._v("查询")])],1),t._l(t.tableData,(function(i){return e("div",{key:i.id,staticClass:"card",staticStyle:{"margin-bottom":"5px",display:"flex","grid-gap":"10px"}},[e("img",{staticStyle:{width:"50px",height:"50px",display:"block","border-radius":"50%"},attrs:{src:i.userAvatar,alt:""}}),e("div",{staticStyle:{flex:"1"}},[e("div",{staticStyle:{"margin-bottom":"5px"}},[e("strong",{staticStyle:{"margin-right":"10px"}},[t._v(t._s(i.title))]),"未解决"===i.solved?e("el-tag",{attrs:{type:"danger"}},[t._v("未解决")]):t._e(),"已解决"===i.solved?e("el-tag",{attrs:{type:"success"}},[t._v("已解决")]):t._e()],1),e("div",{staticStyle:{color:"#888"}},[e("span",{staticStyle:{"margin-right":"20px"}},[e("i",{staticClass:"el-icon-user"}),t._v(" "+t._s(i.userName)+" ")]),t._v(" "),e("i",{staticClass:"el-icon-time"}),e("span",[t._v(" "+t._s(i.time)+" ")])]),e("div",{staticStyle:{margin:"15px 0"}},[e("el-image",{staticStyle:{width:"200px"},attrs:{"preview-src-list":[i.img],src:i.img,alt:""}})],1),e("div",{staticStyle:{margin:"15px 0"},domProps:{innerHTML:t._s(i.content)}}),e("div",{staticStyle:{margin:"20px 0"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleCommentShow(i)}}},[t._v("展开 / 折叠 求购评论")])],1),i.showComment?e("div",[e("Comment",{attrs:{fid:i.id,module:"help"}})],1):t._e()])])})),t.total>0?e("div",{staticStyle:{margin:"15px auto"}},[e("el-pagination",{attrs:{background:"","current-page":t.pageNum,"page-sizes":[5,10,20],"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1):t._e()],2)},n=[],s=i(2356),o={name:"Help",components:{Comment:s.Z},data(){return{tableData:[],pageNum:1,pageSize:5,total:0,title:null}},created(){this.load(1)},methods:{handleCommentShow(t){this.$set(t,"showComment",!t.showComment)},load(t){t&&(this.pageNum=t),this.$request.get("/help/selectFrontPage",{params:{pageNum:this.pageNum,pageSize:this.pageSize,title:this.title}}).then((t=>{"200"===t.code?(this.tableData=t.data?.list,this.total=t.data?.total):this.$message.error(t.msg)}))},handleCurrentChange(t){this.load(t)}}},l=o,r=i(3736),c=(0,r.Z)(l,a,n,!1,null,"2676e36f",null),m=c.exports}}]);
//# sourceMappingURL=157.224312b0.js.map