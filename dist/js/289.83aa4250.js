"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[289],{289:function(e,s,t){t.r(s),t.d(s,{default:function(){return n}});var r=function(){var e=this,s=e._self._c;return s("div",{staticClass:"main-content"},[s("el-card",{staticStyle:{width:"50%",margin:"30px auto"}},[s("div",{staticStyle:{"text-align":"right","margin-bottom":"20px"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.updatePassword}},[e._v("修改密码")])],1),s("el-form",{staticStyle:{"padding-right":"20px"},attrs:{model:e.user,"label-width":"80px"}},[s("div",{staticStyle:{margin:"15px","text-align":"center"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.$baseUrl+"/files/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.user.avatar?s("img",{staticClass:"avatar",attrs:{src:e.user.avatar}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),s("el-form-item",{attrs:{label:"用户名",prop:"username"}},[s("el-input",{attrs:{placeholder:"用户名",disabled:""},model:{value:e.user.username,callback:function(s){e.$set(e.user,"username",s)},expression:"user.username"}})],1),s("el-form-item",{attrs:{label:"姓名",prop:"name"}},[s("el-input",{attrs:{placeholder:"姓名"},model:{value:e.user.name,callback:function(s){e.$set(e.user,"name",s)},expression:"user.name"}})],1),s("el-form-item",{attrs:{label:"电话",prop:"phone"}},[s("el-input",{attrs:{placeholder:"电话"},model:{value:e.user.phone,callback:function(s){e.$set(e.user,"phone",s)},expression:"user.phone"}})],1),s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{attrs:{placeholder:"邮箱"},model:{value:e.user.email,callback:function(s){e.$set(e.user,"email",s)},expression:"user.email"}})],1),s("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("保 存")])],1)],1)],1),s("el-dialog",{attrs:{title:"修改密码",visible:e.dialogVisible,width:"30%","close-on-click-modal":!1,"destroy-on-close":""},on:{"update:visible":function(s){e.dialogVisible=s}}},[s("el-form",{ref:"formRef",staticStyle:{"padding-right":"20px"},attrs:{model:e.user,"label-width":"80px",rules:e.rules}},[s("el-form-item",{attrs:{label:"原始密码",prop:"password"}},[s("el-input",{attrs:{"show-password":"",placeholder:"原始密码"},model:{value:e.user.password,callback:function(s){e.$set(e.user,"password",s)},expression:"user.password"}})],1),s("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[s("el-input",{attrs:{"show-password":"",placeholder:"新密码"},model:{value:e.user.newPassword,callback:function(s){e.$set(e.user,"newPassword",s)},expression:"user.newPassword"}})],1),s("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[s("el-input",{attrs:{"show-password":"",placeholder:"确认密码"},model:{value:e.user.confirmPassword,callback:function(s){e.$set(e.user,"confirmPassword",s)},expression:"user.confirmPassword"}})],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(s){e.fromVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)],1)},a=[],l=(t(7658),{data(){const e=(e,s,t)=>{""===s?t(new Error("请确认密码")):s!==this.user.newPassword?t(new Error("确认密码错误")):t()};return{user:JSON.parse(localStorage.getItem("xm-user")||"{}"),dialogVisible:!1,rules:{password:[{required:!0,message:"请输入原始密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"}],confirmPassword:[{validator:e,required:!0,trigger:"blur"}]}}},created(){},methods:{update(){this.$request.put("/user/update",this.user).then((e=>{"200"===e.code?(this.$message.success("保存成功"),localStorage.setItem("xm-user",JSON.stringify(this.user)),this.$emit("update:user")):this.$message.error(e.msg)}))},handleAvatarSuccess(e,s,t){this.$set(this.user,"avatar",e.data)},updatePassword(){this.dialogVisible=!0},save(){this.$refs.formRef.validate((e=>{e&&this.$request.put("/updatePassword",this.user).then((e=>{"200"===e.code?(this.$message.success("修改密码成功"),this.$router.push("/login")):this.$message.error(e.msg)}))}))}}}),o=l,i=t(3736),u=(0,i.Z)(o,r,a,!1,null,"57477c4c",null),n=u.exports}}]);
//# sourceMappingURL=289.83aa4250.js.map