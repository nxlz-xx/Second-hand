"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[712],{2356:function(t,e,s){s.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{"margin-bottom":"20px","font-size":"22px","font-weight":"bold"}},[t._v("评论 "+t._s(t.commentCount))]),e("div",{staticStyle:{"margin-bottom":"20px"}},[e("el-input",{attrs:{type:"textarea",placeholder:"请输入评论"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),e("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addComment(null)}}},[t._v("评论")])],1)],1),e("div",[t._l(t.commentList,(function(s){return e("div",{key:s.id,staticStyle:{"margin-bottom":"20px"}},[e("div",{staticStyle:{display:"flex","margin-bottom":"20px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:s.userAvatar,alt:""}}),e("div",{staticStyle:{"padding-left":"15px",flex:"1"}},[e("div",{staticStyle:{"margin-bottom":"10px",color:"#666"}},[t._v(t._s(s.userName))]),e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(s.content))]),e("div",{staticStyle:{color:"#666","font-size":"13px","margin-bottom":"5px"}},[e("span",[t._v(t._s(s.time))]),e("span",{class:{"comment-active":s.showReply},staticStyle:{margin:"0 20px",cursor:"pointer"},on:{click:function(e){return t.handleShowReply(s)}}},[e("i",{staticClass:"el-icon-s-comment"}),t._v("回复")]),s.userId===t.user.id?e("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.delComment(s.id)}}},[e("i",{staticClass:"el-icon-delete"}),t._v("删除")]):t._e()]),s.showReply?e("div",[e("el-input",{attrs:{type:"textarea",placeholder:"请输入回复"},model:{value:s.replyContent,callback:function(e){t.$set(s,"replyContent",e)},expression:"item.replyContent"}}),e("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addComment(s)}}},[t._v("回复")])],1)],1):t._e()])]),s.children?e("div",{staticStyle:{"padding-left":"65px"}},t._l(s.children,(function(i){return e("div",{key:i.id,staticStyle:{display:"flex","margin-bottom":"20px"}},[e("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:i.userAvatar,alt:""}}),e("div",{staticStyle:{"padding-left":"15px",flex:"1"}},[e("div",{staticStyle:{"margin-bottom":"10px",color:"#666"}},[t._v(t._s(i.userName)+" "),i.parentName!==s.userName?e("span",[t._v("回复："+t._s(i.parentName))]):t._e()]),e("div",{staticStyle:{"margin-bottom":"5px"}},[t._v(t._s(i.content))]),e("div",{staticStyle:{color:"#666","font-size":"13px","margin-bottom":"5px"}},[e("span",[t._v(t._s(i.time))]),e("span",{class:{"comment-active":i.showReply},staticStyle:{margin:"0 20px",cursor:"pointer"},on:{click:function(e){return t.handleShowReply(i)}}},[e("i",{staticClass:"el-icon-s-comment"}),t._v("回复")]),i.userId===t.user.id?e("span",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.delComment(i.id)}}},[e("i",{staticClass:"el-icon-delete"}),t._v("删除")]):t._e()]),i.showReply?e("div",[e("el-input",{attrs:{type:"textarea",placeholder:"请输入回复"},model:{value:i.replyContent,callback:function(e){t.$set(i,"replyContent",e)},expression:"sub.replyContent"}}),e("div",{staticStyle:{"text-align":"right","margin-top":"5px"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addComment(i)}}},[t._v("回复")])],1)],1):t._e()])])})),0):t._e()])})),t.total>0?e("div",{staticStyle:{"margin-top":"10px"}},[e("el-pagination",{attrs:{small:"",background:"","current-page":t.pageNum,"page-sizes":[5,10,20],"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.total},on:{"current-change":t.handleCurrentChange}})],1):t._e()],2)])},n=[],a={name:"Comment",props:{fid:null,module:null},data(){return{user:JSON.parse(localStorage.getItem("xm-user")||"{}"),commentCount:0,content:"",commentList:[],pageNum:1,pageSize:5,total:0}},created(){this.loadComment()},methods:{handleShowReply(t){this.$set(t,"showReply",!t.showReply)},delComment(t){this.$confirm("您确定删除吗？","确认删除",{type:"warning"}).then((e=>{this.$request.delete("/comment/delete/"+t).then((t=>{"200"===t.code?(this.$message.success("删除成功"),this.loadComment()):this.$message.error(t.msg)}))})).catch((()=>{}))},loadComment(){this.$request.get("/comment/selectTree/"+this.fid+"/"+this.module,{params:{pageNum:this.pageNum,pageSize:this.pageSize}}).then((t=>{"200"==t.code?(this.commentList=t.data?.list||[],this.total=t.data?.total||0):this.$message.error(t.msg)})),this.$request.get("/comment/selectCount/"+this.fid+"/"+this.module).then((t=>{"200"==t.code?this.commentCount=t.data||0:this.$message.error(t.msg)}))},addComment(t){let e={fid:this.fid,userId:this.user.id,module:this.module,content:this.content};t&&(e.content=t.replyContent,e.pid=t.id),e.content?this.$request.post("/comment/add",e).then((t=>{"200"===t.code?(this.$message.success("操作成功"),this.content="",this.loadComment()):this.$message.error(t.msg)})):this.$message.warning("请输入内容!")},handleCurrentChange(t){this.pageNum=t,this.loadComment()}}},o=a,r=s(3736),l=(0,r.Z)(o,i,n,!1,null,"74c55f68",null),c=l.exports},4712:function(t,e,s){s.r(e),s.d(e,{default:function(){return m}});var i=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{width:"50%",margin:"10px auto"}},[e("div",{staticClass:"card",staticStyle:{"margin-bottom":"10px"}},[e("div",{staticStyle:{"font-size":"20px","text-align":"center","margin-bottom":"20px"}},[t._v(t._s(t.posts.title))]),e("div",{staticStyle:{color:"#666","margin-bottom":"40px","text-align":"center"}},[e("span",[e("i",{staticClass:"el-icon-user"}),t._v(" "+t._s(t.posts.userName))]),e("span",{staticStyle:{"margin-left":"20px"}},[e("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(t.posts.time))]),e("span",{staticStyle:{"margin-left":"20px"}},[e("i",{staticClass:"el-icon-reading"}),t._v(" "+t._s(t.posts.readCount))])]),e("div",{staticClass:"w-e-text",domProps:{innerHTML:t._s(t.posts.content)}})]),e("div",{staticClass:"card",staticStyle:{padding:"20px 30px"}},[e("Comment",{attrs:{fid:t.id,module:"posts"}})],1)])},n=[],a=s(2356),o={name:"PostsDetail",components:{Comment:a.Z},data(){return{id:this.$route.query.id,posts:{}}},created(){this.$request.put("/posts/updateCount/"+this.id).then((t=>{this.load()}))},methods:{load(){this.$request.get("/posts/selectById/"+this.id).then((t=>{"200"==t.code?this.posts=t.data||{}:this.$message.error(t.msg)}))}}},r=o,l=s(3736),c=(0,l.Z)(r,i,n,!1,null,"efe58992",null),m=c.exports}}]);
//# sourceMappingURL=712.156714e8.js.map